<!DOCTYPE html>
<html lang="en">
<head>
<style>
    .heart-icon.liked {
    color: red;
    }
</style> 
</head>

<body>
@model IEnumerable<api.DTOs.InfluencerDto>
    <div id="__next" data-reactroot="">
        <div class="layout-wrapper layout-theme-light layout-static layout-static-inactive p-ripple-disabled">
            <div class="layout-topbar">
                <a class="layout-topbar-logo" href="../index.html">
                    <img src="https://mykol.com.vn/layout/images/logo.jpg" width="70" height="60" alt="logo" />
                </a>
                <div class="btn-header-topbar"></div>
                <div class="nav-menu-top-bar">
                    <button type="button"
                            class="p-link ml-0 px-3 py-2 layout-menu-button layout-topbar-button font-bold">
                        Tin tuyển
                        dụng
                    </button><button type="button"
                                     class="p-link ml-0 px-3 py-2 layout-menu-button layout-topbar-button font-bold">
                        KOC Free
                        Cast
                    </button>
                </div><button type="button"
                              class="p-link ml-0 outline-none layout-topbar-menu-button layout-topbar-button">
                    <div class="no-login"><i class="pi pi-bars" style="font-size:2rem"></i></div>
                </button>
                <div class="layout-topbar-menu layout-topbar-menu-moblie">
                    <div>
                        <button type="button" class="p-link layout-topbar-button"><span>Đăng nhập</span></button><span>
                            |
                        </span><button type="button" class="p-link layout-topbar-button">
                            <span>
                                Đăng
                                ký
                            </span>
                        </button>
                    </div>
                </div>
                <div></div>
                <div></div>
            </div>
            <div class="ml-0 layout-main-container">
                <div class="layout-main">
                    <div id="search-kol-page" class="w-full bg-white">
                        <div id="form-search-kol-page" class="md:pt-5 py-3 md:pb-7">
                            <div class="container">
                                <h3 class="text-center text-white">Tìm kiếm Influencer</h3>
                                <form asp-action="Search" method="post">
                                    <div class="input-name md:mb-4 mb-2 border-round-2xl overflow-hidden m-auto relative w-full">
                                        <input type="text" id="name" class="w-full border-none outline-none"
                                               placeholder="Nhập username Tiktok, ví dụ: lebong85" name="name" />
                                        <button type="submit" class="border-none z-2 cursor-pointer absolute outline-none"></button>
                                    </div>
                                    <div class="flex flex-wrap gap-2 justify-content-center">
                                        <select class="items-form border-none cursor-pointer outline-none shadow-1 border-round-2xl"
                                                name="careerCode">
                                            <option selected="" value="0">Lĩnh vực</option>
                                            <option value="1">Ẩm thực</option>
                                            <option value="2">Làm đẹp</option>
                                            <option value="3">Thời trang</option>
                                            <option value="4">Sức khỏe</option>
                                            <option value="5">Lifestyle</option>
                                            <option value="6">Mẹ và bé</option>
                                            <option value="20">Mẫu Livestream</option>
                                            <option value="25">Mẫu Ảnh</option>
                                            <option value="7">Du lịch</option>
                                            <option value="8">Công nghệ</option>
                                            <option value="9">Giải trí</option>
                                            <option value="10">Thể thao</option>
                                            <option value="11">Giáo dục</option>
                                            <option value="12">Kinh doanh</option>
                                            <option value="13">Tài chính</option>
                                            <option value="14">Nông nghiệp</option>
                                            <option value="15">Sách</option>
                                            <option value="16">Thú cưng</option>
                                            <option value="17">Nghệ thuật</option>
                                            <option value="18">Âm nhạc &amp; Nhảy</option>
                                            <option value="19">Xe cộ</option>
                                            <option value="21">Gia dụng</option>
                                            <option value="22">Nội thất</option>
                                            <option value="23">Đồ chơi</option>
                                            <option value="24">Khác</option>
                                        </select><select class="items-form border-none cursor-pointer outline-none shadow-1 border-round-2xl"
                                                         name="followers">
                                            <option value="0">Follower</option>
                                            <option value="N/A - 1000">Dưới 1,000</option>
                                            <option value="1000 - 5000">1,000 - 5,000</option>
                                            <option value="5000 - 10000">5,000 - 10,000</option>
                                            <option value="10000 - 50000">10,000 - 50,000</option>
                                            <option value="50000 - 100000">50,000 - 100,000</option>
                                            <option value="100000 - 200000">100,000 - 200,000</option>
                                            <option value="200000 - 500000">200,000 - 500,000</option>
                                            <option value="500000 - N/A">Trên 500,000</option>
                                        </select><select class="items-form border-none cursor-pointer outline-none shadow-1 border-round-2xl"
                                                         name="bookingPrice">
                                            <option selected="" value="">Giá booking</option>
                                            <option value="0-500000">0đ - 500,000đ</option>
                                            <option value="500000-1000000">500,000đ - 1,000,000đ</option>
                                            <option value="1000000-2000000">1,000,000đ - 2,000,000đ</option>
                                            <option value="2000000-5000000">2,000,000đ - 5,000,000đ</option>
                                            <option value="5000000-10000000">5,000,000đ - 10,000,000đ</option>
                                            <option value="10000000-20000000">10,000,000đ - 20,000,000đ</option>
                                            <option value="20000000-N/A">Trên 20,000,000đ</option>
                                        </select><select class="items-form border-none cursor-pointer outline-none shadow-1 border-round-2xl"
                                                         name="cityCode">
                                            <option selected="" value="0">Địa chỉ</option>
                                        </select><select class="items-form border-none cursor-pointer outline-none shadow-1 border-round-2xl"
                                                         name="avgVideo">
                                            <option selected="" value="">Doanh thu/video</option>
                                            <option value="N/A - 100000">Dưới 100,000đ</option>
                                            <option value="100000 - 500000">100,000đ - 500,000đ</option>
                                            <option value="500000 - 1000000">500,000đ - 1,000,000đ</option>
                                            <option value="1000000 - 5000000">1,000,000đ - 5,000,000đ</option>
                                            <option value="5000000 - 10000000">5,000,000đ - 10,000,000đ</option>
                                            <option value="10000000 - 20000000">10,000,000đ - 20,000,000đ</option>
                                            <option value="20000000 - N/A">Trên 20,000,000đ</option>
                                        </select><select class="items-form border-none cursor-pointer outline-none shadow-1 border-round-2xl"
                                                         name="avgLive">
                                            <option selected="" value="">Doanh thu/live</option>
                                            <option value="N/A - 100000">Dưới 100,000đ</option>
                                            <option value="100000 - 500000">100,000đ - 500,000đ</option>
                                            <option value="500000 - 1000000">500,000đ - 1,000,000đ</option>
                                            <option value="1000000 - 5000000">1,000,000đ - 5,000,000đ</option>
                                            <option value="5000000 - 10000000">5,000,000đ - 10,000,000đ</option>
                                            <option value="10000000 - 20000000">10,000,000đ - 20,000,000đ</option>
                                            <option value="20000000 - N/A">Trên 20,000,000đ</option>
                                        </select>
                                    </div>
                                    <div class="footer-search gap-2 flex justify-content-end pr-3 md:mt-3 mt-2">
                                        <button aria-label="Lọc" type="submit" style="width:80px" id="btn-search"
                                                class="p-button p-component" >
                                            <span class="p-button-icon p-c p-button-icon-left pi pi-search"></span><span class="p-button-label p-c">Lọc</span><span role="presentation"
                                        </button>
                                        <button aria-label="Xóa chọn"
                                                type="button" class="p-button p-component p-button remove-filter ml-2" id="btn-clear">
                                            <span class="p-button-icon p-c p-button-icon-left pi pi-reply"></span><span class="p-button-label p-c">Xóa chọn</span><span role="presentation"
                                                                                                                                                                        class="p-ink"></span>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="container">
                            <div id="search-kocs" class="card md:pb-6 pb-3 pl-3 pr-3 shadow-1 md:mt-6 mt-3 md:mb-3 my-3 border-round-2xl w-full">
                                @await Html.PartialAsync("_ListKOC", Model)
                            </div>
                        </div>
                    </div>
                    <div id="zalo-fixed">
                        <a href="../../zalo.me/0908141233.html" target="_blank">
                            <img src="../demo/images/social/zalo-icon.png" alt="zalo" />
                        </a>
                    </div>
                </div>
            </div>
            <div class="layout-mask"></div>
        </div>
    </div>
    
    
<script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/components/search-kocs","query":{},"buildId":"1hnPLuHKtEE3djqGttqdh","runtimeConfig":{"contextPath":"","uploadPath":"/api/upload","url":"https://api.mykol.vn","siteSEO":"https://mykol.vn","path":"/api/kols/","pathV2":"/api/v2/kols/"},"nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script>
<script src="~/js/search.js"></script>
<script>
    function addToFavorites(influencerId) {
    // Tạo URL cho yêu cầu API
    var url = 'https://localhost:7290/api/Favourites/add/' + influencerId;

    // Sử dụng fetch API để gửi yêu cầu POST
    fetch(url, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            // Thêm token JWT nếu cần thiết cho xác thực
            'Authorization': 'Bearer ' + localStorage.getItem('jwtToken')
        }
    })
        .then(response => {
            if (!response.ok) {
                // Kiểm tra nếu response không phải là 200 OK
                throw new Error('Failed to add to favorites. Status: ' + response.status);
            }
            return response.json();  // Chuyển đổi phản hồi thành JSON
        })
        .then(data => {
            console.log('Success:', data); // Log phản hồi từ API

            // Kiểm tra nếu phản hồi trả về thông báo lỗi hoặc thành công
            if (data && data.message === "This influencer is already in your favorites.") {
                alert("This influencer is already in your favorites.");
            } else {
                // Cập nhật giao diện hoặc trạng thái của nút yêu thích
                var heartIcon = document.querySelector(`.like-kol[data-id='${influencerId}']`);
                heartIcon.classList.add('liked');
                heartIcon.classList.remove('pi-heart');
                heartIcon.classList.add('pi-heart-fill');
                alert("Added to favorites successfully!");
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred. Please try again.');
        });
}

</script>
</body>
</html>